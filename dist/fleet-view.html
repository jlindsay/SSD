
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>SeaStream Insight: Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- For third-generation iPad with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="./iidx/components/brandkit/favicon/favicon-144px.png">

  <!-- For iPhone with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="./iidx/components/brandkit/favicon/favicon-114px.png">

  <!-- For first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="./iidx/components/brandkit/favicon/favicon-72px.png">

  <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="./iidx/components/brandkit/favicon/favicon.png">

  <link rel="icon" href="./iidx/components/brandkit/favicon/favicon.ico">
  <link href="./iidx/css/iids.css" rel="stylesheet" type="text/css">
  <link href="./iidx/css/responsive.css" rel="stylesheet" type="text/css">



  <link href="./css/hmi.css" rel="stylesheet" type="text/css">
  <!--link href="./css/styles.css" rel="stylesheet" type="text/css"-->

  <!--link href="./css/main.css" rel="stylesheet" type="text/css"-->

  <!--[if lt IE 9]>
    <link id="theme-ie" href="../../css/ie.css" rel="stylesheet" type="text/css">
  <![endif]-->

  <script src="./iidx/components/modernizr/modernizr.js"></script>
  <script src="./bower/jquery/dist/jquery.js"></script>
<style>

#left-nav
{
	box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);
}

#left-nav ul {
	box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);
}

#left-nav ul li{
	font-size: 16px;
	color:#000;
  letter-spacing: 0.25px
}

#left-nav ul li .description{
	font-size: 13px;
	color:#666;
}

#left-nav ul li .details{
	font-size: 12px;
  color: #979797;
  letter-spacing: 0.5px;
  font-style: italic;
}
</style>

</head>
<body>

<nav id="navbar" class="navbar navbar-static-top navbar-default" role="navigation" >

  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="./index.html"><span class="ge-logo"></span> <span>SeaStream Insight<small><i>powered by</i> Predix</small></span></a>

      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

  <div class="pull-right profile">
      <div class="btn-toolbar pull-left">
        <img class="circular" src="./img/sprites/screens/sprite_header_avatar.png" />
      </div>
    </div>
  </div>


  <div class="primary-navbar nav-collapse">
    <div class="container">
		<button id="fleet-view-btn" class="btn btn-primary btn-info pull-left"><i class="icon-sitemap pull-left"></i>Fleet View<span></button>
  </div>

</nav>

<nav id="left-nav" style="width:400px;max-width:400px; padding:20px; padding-top:120px; height:auto;">
	<h4>SMARTSIGNAL INCIDENTS</h4>
	<ul class="list-group smart-signal" style="padding-top:0px;">
		<li class="list-group-item">Gearbox Temperature Anomaly<div class="pull-right" style="color:#ccc; font-size:11px;">1 min ago</div>
			
			<div class="description">Overall Risk  <div class="pull-right" style="color:#333; font-weight:bold;">24%</div></div>
 			<div style="width:100%; border:1px #ccc solid;">
 				<div style="width:24%; height:10px;background-color:#FFED45;"></div>
 			</div>
 			<div class="details">DS-01</div>
		</li>
		
	</ul>

	
	<h4 style="margin-top:20px;">SHIPS</h4>
	<ul class="list-group ships" style="padding-top:0px;">
		<li class="list-group-item" style="border-bottom: 1px solid #ddd;margin-bottom:0px;color:#aaa;">
		<i class="icon-search" style="font-size:18px;color:#aaa;"></i> Search
		<!--input id="query" type="search" class="form-control tt-input" autocomplete="off" placeholder="Search" spellcheck="false" dir="auto" style="position:relative;float:left;width:280px; background-color:none;"-->
		</li>
		<li class="list-group-item" id="ds-01-item">DS-01 
			   <input name="data" value="#a" type="hidden" />
        <input name="id" value="#ds_01" type="hidden" />
            <input class="btn btn-warning" type="button" value="AVAILABLE">
   			<i class="module-arrow icon-chevron-right pull-right" style="font-size:18px;color:#E7E8EA;line-height:75px;"></i>
   			<div class="description">Acme Drilling Co.</div>
   			<div class="details">11% Average Downtime</div>
      
 		</li>
		<li class="list-group-item " id="ds-02-item">DS-02 
			<input name="data" value="#b" type="hidden" />
            <input name="id" value="#ds_02" type="hidden" />
            <input class="btn btn-success" type="button" value="AVAILABLE">
  			<i class="module-arrow icon-chevron-right pull-right" style="font-size:18px;color:#E7E8EA;line-height:75px;"></i>
  			<div class="description">Acme Drilling Co.</div>
   			<div class="details">9% Average Downtime</div>
      
		</li>
		<li class="list-group-item " id="ds-03-item">DS-03 
			<input name="data" value="#c" type="hidden" />
            <input name="id" value="#ds_03" type="hidden" />
            <input class="btn btn-success" type="button" value="AVAILABLE">
  			<i class="module-arrow icon-chevron-right pull-right" style="font-size:18px;color:#E7E8EA;line-height:75px;"></i>
  			<div class="description">Acme Drilling Co.</div>
   			<div class="details">16% Average Downtime</div>
      
		</li>
		<li class="list-group-item" id="ds-04-item">DS-04 
            <input name="data" value="#d" type="hidden" />
            <input name="id" value="#ds_04" type="hidden" />
            <input class="btn btn-warning" type="button" value="AVAILABLE">
  			<i class="module-arrow icon-chevron-right pull-right" style="font-size:18px;color:#E7E8EA;line-height:75px;"></i>
  			<div class="description">Acme Drilling Co.</div>
   			<div class="details">21% Average Downtime</div>
		</li>
		<li class="list-group-item " id="ds-05-item">DS-05 
			<input name="data" value="#e" type="hidden" />
            <input name="id" value="#ds_05" type="hidden" />
            <input class="btn btn-success" type="button" value="AVAILABLE">
  			<i class="module-arrow icon-chevron-right pull-right" style="font-size:18px;color:#E7E8EA;line-height:75px;"></i>
  			<div class="description">Acme Drilling Co.</div>
   			<div class="details">7% Average Downtime</div>
		</li>
	</ul>
</nav>


<div class="pannel" style="z-index:1000 ; position:absolute; bottom:0; left:400px; right:0px;  height:220px; background-color:#e7e8ea; ">
    <div class="module-header" style="background-color: #505357;
  box-shadow: 0px 2px 4px #888888; adding-left: 20px;
  padding-right: 20px;
  padding-top: 10px;
  padding-left: 15px;
  padding-bottom: 10px; color:#fff; font-weight:bold; ">
      Critical Asset Performance - KPIs
    </div>
    <img id="my-map" class="map" src="./img/kpi/img-0.png">
    <img id="my-map" class="map" src="./img/kpi/img-1.png">
    <img id="my-map" class="map" src="./img/kpi/img-2.png">
</div>


<section id="content" style="left:400px;right:0px;margin-top:97px; position:relative; overflow:hidden;">
      <div class="parent" style="overflow: hidden; position: relative;">
        <div class="panzoom" style="transform: matrix(1.2, 0, 0, 1.2, -144.314285714285, 28.5160714285843); backface-visibility: hidden; transform-origin: 50% 50% 0px; cursor: move; transition: none; -webkit-transition: none;">
            <a id="a" data='ds_01' href="home.html?uuid=301"><img class="my-ship-icon" src="./img/icons/ship-icon-warning.png" style="z-index:10; position:relative; top:1100px; left:1400px;"></a>
            <a id="b" data='ds_02' href="home.html?uuid=302"><img class="my-ship-icon" src="./img/icons/ship-icon.png" style="z-index:10; position:relative; top:1000px; left:1450px;"></a>
            <a id="c" data='ds_03' href="home.html?uuid=303"><img class="my-ship-icon" src="./img/icons/ship-icon.png" style="z-index:10; position:relative; top:1050px; left:1500px;"></a>
            <a id="d" data='ds_04' href="home.html?uuid=304"><img class="my-ship-icon" src="./img/icons/ship-icon-warning.png" style="z-index:10; position:relative; top:1150px; left:1600px;"></a>
            <a id="d" data='ds_05' href="home.html?uuid=305"><img class="my-ship-icon" src="./img/icons/ship-icon.png" style="z-index:10; position:relative; top:1100px; left:1550px;"></a>
            <img id="my-map" class="map" src="./img/google-map-lg.png">
        </div>
      </div>
     
</section>    



    




<script src="./iidx/components/requirejs/require.js"></script>
<script src="./iidx/js/require.config.js"></script>
<script type="text/javascript">

	require.config({
    	baseUrl: './iidx/',
        
  	});

</script>

<script src="./iidx/components/jquery/jquery.js"></script>
<script src="./js/globle.js"></script>
<script src="./js/keynote.js"></script>

<style>
  img{  

      max-width: none;
      width: none;
      height: none;
      vertical-align: none;
      border: none;
}


.my-ship-icon{
 opacity:1;
    filter:alpha(opacity=100); /* For IE8 and earlier */
  -o-transition: .3s;
  -ms-transition: .3s;
  -moz-transition: .3s;
  -webkit-transition: .3s;
  transition: .3s;
  cursor: pointer; cursor: hand;
}

.my-ship-icon:hover{
      opacity:0.4;
    filter:alpha(opacity=40); /* For IE8 and earlier */

}
</style>

<script>

	require.config({
		baseUrl: './',
		urlArgs: String("r="+ (new Date()).getTime()),
  		paths: {
			'cookies'            : 'js/jquery.cookie',
    	'url'                : 'js/jquery.url',
    	'keynote'            : 'js/keynote',
    	'scrollTo'           :'js/jquery.scrollTo.js',
      'jquery.panzoom'     : './bower/jquery.panzoom/dist/jquery.panzoom'
		},
		shim: {
			'url'        : ['jquery'],
			'cookies'    : ['jquery'],
			'scrollTo'   : ['jquery'],
      'jquery.panzoom' : ['jquery'],
		}

	});

	require(['jquery','cookies', 'url', 'jquery.panzoom'], function($) {
   			console.log("deubg:init()");
   		var _keynote = new Keynote().init( { pages: _pages } );
   			initUI();
	});

    function initUI()
    {
    //        console.log("ping");

        var $panzoom = $('.panzoom').panzoom();
            
            $panzoom.parent().on('mousewheel.focal', function( e ) {
                        //console.log(e);
                        e.preventDefault();
                        $(".my-popover").remove();
                    var delta = e.delta || e.originalEvent.wheelDelta;
                    var zoomOut = delta ? delta < 0 : e.originalEvent.deltaY > 0;
                        //console.log(zoomOut);
                        $panzoom.panzoom('zoom', zoomOut, {
                            increment: 0.1,
                            animate: false,
                            focal: e
                });
            });

/*
        $(".panzoom").css({"transform": "matrix(0.4, 0, 0, 0.4, -559.650216450218, 329.687175324678)",
                            "transform-origin": "50% 50% 0px" });
*/
        $(".my-ship-icon").click(function(e){
            e.preventDefault();
            showPopup(e);
        });
        //$(".my-ship-icon").hover(showPopup);
        $(".panzoom").mousedown(function(e){
            $(".my-popover").remove();
        })
        //100 + $wrap.width()/2,100+ $wrap.height()/2
        $('.panzoom').hide();
        $('.panzoom').fadeIn("fast", function(e){
           
        })
        $(".panzoom").panzoom('zoom', .7, {relative: false, animate: false} ) // center  
        $(".panzoom").panzoom('pan', -1026, -900, {relative: false, animate: true} ) // center  
        //$(".panzoom").panzoom('pan', -726, -674, {relative: false, animate: true} ) // center  
        
        //disable panzoom after were foused
        setTimeout(function(){ 
          $(".panzoom").panzoom("disable")
        }, 1500);
        
        //$("#left-nav ul li").css( "cursor","");
        $("#left-nav ul.ships li").click(function(e){
                console.log(e.target)
                e.preventDefault();
            var elm_id = $(e.target).closest("li").find("input[name=data]").val()
            var id = $(e.target).closest("li").find("input[name=id]").val()
                console.log("click:", elm_id );
            var elm = $(elm_id).find("img");
                console.log("elm:", elm);
                hidePopup();
                if(id == "#ds_04" || id == "#ds_01"){
                    showPopup({ target : elm, preventDefault:function(){}, id:id })  
                }
              

        });

        $("#left-nav ul.smart-signal li").click(function(e){
            e.preventDefault();
            console.log("smart-signal::click:");
            $("#ds-01-item").trigger("click");
        });
    }

    function hidePopup()
    {
      $(".my-popover").fadeOut("fast",function(e){
        $(".my-popover").remove();
      })
        
    }

    function showPopup(e)
    {
        
            e.preventDefault()
        console.log("showPopup:", e.id);
        /*
        var item = $( e.target ).closest("li");//.attr("id");
            console.log("item:", item);
        if(e.target == "ds-02-item" ){

        }
        */
          var html = '<div id="{{popoverId}}" rel="popover" class="my-popover popover bottom" data-popover-id="{{popoverId}}" style="position:absolute;display:block; "> \
                        <div class="arrow" ></div> \
                        <header class="panel-header"> \
                          <!--div class="left"><i class="icon-map-marker"></i></div--> \
                          <div class="popover-title panel-title voice voice-brand"><h3>{{title}}</h3></div> \
                        </header> \
                        <div class="popover-content panel-content">   \
                            <ul class="inline" style="list-style-type: none;font-size: 14px;letter-spacing: 0.25px;">   \
                                <li><span class="field">IMO Number</span><span class="offset_space">:&nbsp;&nbsp;&nbsp;&nbsp;{{imp_number}}</span></li>   \
                                <li><span class="field">Ship Category</span><span class="offset_space">:&nbsp;&nbsp;&nbsp;&nbsp;{{ship_category}}</span></li>   \
                                <li><span class="field">Operator</span><span class="offset_space">:&nbsp;&nbsp;&nbsp;&nbsp;{{operator}}</span></li>   \
                                <li><span class="field">Registered Owner</span><span class="offset_space">:&nbsp;&nbsp;&nbsp;&nbsp;{{registered_owner}}</span></li>   \
                                <li><span class="field">Technical Manager</span><span class="offset_space">:&nbsp;&nbsp;&nbsp;&nbsp;{{technical_manager}}</span></li>   \
                                <li><span class="field">Last Seen</span><span class="offset_space">:&nbsp;&nbsp;&nbsp;&nbsp;{{last_seen}}</span></li>   \
                                <li><span class="field">Move Status</span><span class="offset_space">:&nbsp;&nbsp;&nbsp;&nbsp;{{move_status}}</span></li>   \
                                <li><span class="field">MT Photo/Info</span><span class="offset_space">:&nbsp;&nbsp;&nbsp;&nbsp;{{photo_info}}</span></li>   \
                            </ul>   \
                            <div class="actions" >\
                                <a id="show-smart-signal-summary" href="./home.html?uuid={{uuid}}" class="btn btn-primary pull-right my-btn" >Ship Overview</a>  \
                             </div> \
                        </div> \
                        <div id="smart-signal-summary" class="{{hide_details}}">\
                          <div class="break" style="letter-spacing: 1px;"><img style="height: 18px;padding-right: 5px;padding-left: 6px;" src="./img/sprites/icons/ico_section_smartsignal.png" />GE SmartSignal</div>       \
                          <footer class="panel-footer"> \
                             <div style="font-size: 14px;font-weight: 600;letter-spacing: 0.25px;margin-bottom: 5px;">Gearbox Temperature Anomaly</div>    \
                             <div style="font-size: 12px;font-weight: 600;letter-spacing: 0.5px;">DIAGNOSIS</div> \
                             <div class="{{hide_details}}" style="font-size: 12px;line-height: 16px;letter-spacing: 0.25px;margin-bottom: 15px;">Likely bearing failure developing: gearbox inboard driver bearing metal temps 175 degF vs. expectation of 155.  Vibrations reading 0.38 mils vs. expected value of 0.25 mils.</div> \
                             <div> \
                                <a href="./home.html?uuid={{uuid}}" class="btn btn-primary pull-right my-btn" >Details</a>   \
                             </div>\
                        </footer> \
                        </div> \
                      </div>';
            

            $(".my-popover").remove();
            var id = "p-0";
            var key = $(e.target).closest("a").attr("data");
  

            var ship_data = ship_dataset[key];
            
            var tmp = html;
                tmp = tmp.split("{{popoverId}}").join(id)
                          .split("{{title}}").join(ship_data.title)
                          .split("{{imp_number}}").join(ship_data.imp_number)
                          .split("{{ship_name}}").join(ship_data.ship_name)
                          .split("{{ship_category}}").join(ship_data.ship_category)
                          .split("{{operator}}").join(ship_data.operator)
                          .split("{{registered_owner}}").join(ship_data.registered_owner)
                          .split("{{technical_manager}}").join(ship_data.technical_manager)
                          .split("{{last_seen}}").join(ship_data.last_seen)
                          .split("{{move_status}}").join(ship_data.move_status)
                          .split("{{photo_info}}").join(ship_data.photo_info)
                          .split("{{uuid}}").join(ship_data.uuid)
                          .split("{{hide_details}}").join(ship_data.hide_details)
                          
                      
                
                $(document.body).prepend(tmp);
                $("#"+id).hide();

                $("#"+id).fadeIn();
                //$(".my-popover").popover({position:"bottom"});
                var position = $(e.target).position();
                var offset = $(e.target).offset();

                    //console.log( position, offset );
                $("#"+id).css("top", Number(offset.top) + 25 );
                $("#"+id).css("left", Number(offset.left) - 235 );

                $("#show-smart-signal-summary").click(function(e){
                  //e.preventDefault();
                  //$("#smart-signal-summary").show();
                })

    //        console.log("shit happens!");
        };

    
        var ship_dataset = {
             'ds_01' : {   title : "DS-01",
                            imp_number : "9234564",
                            ship_name : "DS-01",
                            ship_category : "Drill Ship",
                            operator : "ACME Oil co.",
                            registered_owner : "ACME Drilling co.",
                            technical_manager : "ACME Drilling co.",
                            last_seen : "4 May 2014 15:07 GMT",
                            hide_details: "",
                            move_status : "Stationary",
                            photo_info : "<a href='#'>Click Here</a>",
                            uuid : "301"
                        }, 
             'ds_02' : {   title : "DS-02",
                            imp_number : "9234559",
                            ship_name : "DS-02",
                            ship_category : "Drill Ship",
                            operator : "ACME Oil co.",
                            registered_owner : "ACME Drilling co.",
                            technical_manager : "ACME Drilling co.",
                            last_seen : "4 May 2014 15:07 GMT",
                            hide_details: "",
                            move_status : "Stationary",
                            photo_info : "<a href='#'>Click Here</a>",
                            uuid : "302"
                        }, 
            'ds_03' : {   title : "DS-03",
                          imp_number : "9234343",
                          ship_name : "DS-03",
                          ship_category : "Drill Ship",
                          operator : "ACME Oil co.",
                          registered_owner : "ACME Drilling co.",
                          technical_manager : "ACME Drilling co.",
                          last_seen : "4 May 2014 15:07 GMT",
                          hide_details: "",
                          move_status : "Stationary",
                          photo_info : "<a href='#'>Click Here</a>",
                          uuid : "303"
                        },

            'ds_04' : {   title : "DS-04",
                          imp_number : "9234664",
                          ship_name : "DS-04",
                          ship_category : "Drill Ship",
                          operator : "ACME Oil co.",
                          registered_owner : "ACME Drilling co.",
                          technical_manager : "ACME Drilling co.",
                          last_seen : "4 May 2014 15:07 GMT",
                          hide_details: "collapse",
                          move_status : "Stationary",
                          photo_info : "<a href='#'>Click Here</a>",
                          uuid : "101"
                        },
             'ds_05' : {  title : "DS-05",
                          imp_number : "9234564",
                          ship_name : "DS-05",
                          ship_category : "Drill Ship",
                          operator : "ACME Oil co.",
                          registered_owner : "ACME Drilling co.",
                          technical_manager : "ACME Drilling co.",
                          last_seen : "4 May 2014 15:07 GMT",
                          hide_details: "",
                          move_status : "Stationary",
                          photo_info : "<a href='#'>Click Here</a>",
                          uuid : "305"
                        }
            }
</script>

<style>
.offset_space
{
    
    /*float:right;*/
}
.my-popover
{
    min-width:500px;
}
.my-popover footer
{
    background-color: #fff;
}
.my-popover .my-btn{
 
    margin-bottom: 10px;
}
.my-popover .break{
    background-color: #de2533;
    color: #fff;
    padding:10px;
    clear:both;
    
}
.my-popover header .popover-title h3{
  color: #fff;
}
.my-popover header .popover-title{
  text-align: center;
  background-color: #505357;
  color: #fff;
}


.field{
  width:200px;  
  display: inline-block;
  /*margin-right:20px;*/
  font-weight: 600;
}

.my-popover > .arrow, .my-popover > .arrow:after
{
    /*border-style:;*/
    /*background-color: #505357;    */
}
</style>

<script src="./iidx/components/respond/respond.src.js"></script>

</body>
</html>



