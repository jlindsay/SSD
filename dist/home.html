
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Sea Stream Demo: Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- For third-generation iPad with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="./iidx/components/brandkit/favicon/favicon-144px.png">

  <!-- For iPhone with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="./iidx/components/brandkit/favicon/favicon-114px.png">

  <!-- For first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="./iidx/components/brandkit/favicon/favicon-72px.png">

  <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="./iidx/components/brandkit/favicon/favicon.png">

  <link rel="icon" href="./iidx/components/brandkit/favicon/favicon.ico">
  <link href="./iidx/css/iids.css" rel="stylesheet" type="text/css">
  <link href="./iidx/css/responsive.css" rel="stylesheet" type="text/css">



  <link href="./css/hmi.css" rel="stylesheet" type="text/css">
  <!--link href="./css/styles.css" rel="stylesheet" type="text/css"-->

  <!--link href="./css/main.css" rel="stylesheet" type="text/css"-->

  <!--[if lt IE 9]>
    <link id="theme-ie" href="../../css/ie.css" rel="stylesheet" type="text/css">
  <![endif]-->

  <script src="./iidx/components/modernizr/modernizr.js"></script>

<style>
</style>

</head>
<body>

<nav id="navbar" class="navbar navbar-static-top navbar-default" role="navigation" style="display:none;">

  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <a class="navbar-brand" href="#"><span class="ge-logo"></span> <span>Sea Stream Demo<small><i>powered by</i> GE Software</small></span></a>

      <!-- .navbar-toggle for collapsed navbar content -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

  </div>
  <div class="primary-navbar nav-collapse">
    <div class="container">
    
      <ul id="master-nav" class="nav navbar-nav">
        <li><a href="#fleet">Fleet</a></li>
        <li><a href="#ship">Ship</a></li>
      </ul>


      <ul id="fleet" class="nav navbar-nav" style="margin-left:40px;display:none;">
        <li><a class="active" href="#">A</a></li>
        <li><a href="#">B</a></li>
        <li><a href="#">C</a></li>
      </ul>

      <ul id="ship" class="nav navbar-nav" style="margin-left:40px;display:none;">
        <li><a class="active" href="#">A</a></li>
        <li><a href="#">B</a></li>
        <li><a href="#">C</a></li>
        <li><a href="#">D</a></li>
        <li><a href="#">E</a></li>
      </ul>

  </div>

</nav>

<section id="content-body">

	
	

</section>




<script src="./iidx/components/requirejs/require.js"></script>
<script src="./iidx/js/require.config.js"></script>
<script type="text/javascript">

	require.config({
    	baseUrl: './iidx/'
  	});

</script>


<script src="./iidx/components/jquery/jquery.js"></script>
<!--script src="./js/jquery.cookie.js"></script>
<script src="./js/jquery.url.js"></script-->
<script src="./js/globle.js"></script>
<script src="./js/keynote.js"></script>
<script>
	
	require.config({
		baseUrl: './',
		urlArgs: String("r="+ (new Date()).getTime()),
  		paths: {
			'cookies': 'js/jquery.cookie',
    		'url': 'js/jquery.url',
    		'keynote': 'js/keynote'
		},
		shim: {
			'url': ['jquery'],
			'cookies': ['jquery'],
		}

	});

	require(['jquery','cookies', 'url', 'keynote'], function($) {
   			console.log("deubg:init()");
   		var _keynote = new Keynote().init( { pages: _pages } );
   			initUI();
	});


	function initUI()
	{
		console.log("debug:initUI()");
		
		$("#master-nav li").click(function(e){
				e.preventDefault();
			var elm = $(e.target).attr("href");
				$("#master-nav li").removeClass("active");
				$(e.target).closest("li").addClass("active");
				focusMainTabs(elm);
		});
		
		parseURL();


	}

	function parseURL()
	{
		console.log("debug:parseURL()");
		var url = $(location).attr('href');
		var hash = $(location).attr('hash').split("#").join("");
			
			hash = hash.split(";");

		var hash_params = {};

		$.each( hash , function($index,$val){
			var at = $val.split("=");
				hash_params[at[0]] = at[1];
		});

		var key = hash_params['tab'];

		switch(key)
		{
			case "ship":
				focusMainTabs("#ship");
				break;
			case "fleet":
				focusMainTabs("#fleet");
				break;
			default:
				focusMainTabs("#index");
				break;
		}

	}


	function focusMainTabs(elm_id)
	{
		console.log( "debug:focusMainTabs():elm_id:", elm_id );
		
		$("#fleet").hide();
		$("#ship").hide();
		
		if( !elm_id ){
			return;
		}

		var elm = $("#master-nav").find("a[href='"+elm_id+"']");//
			$("#master-nav li").removeClass("active");
		if( elm )
		{
			$(elm).closest("li").addClass("active");	
		}else{
			//$("#master-nav li:first").addClass("active");
		}
		
		$("#navbar").fadeIn();
		$(elm_id).fadeIn();

		var key = elm_id.split("#").join("");
		switch(elm_id)
		{
			case "#fleet":
				$(location).attr('hash', "#tab=" + key  );
				loadTemplate( "home_fleet" );
				break;
			case "#ship":
				$(location).attr('hash', "#tab=" + key  );
				loadTemplate( "home_ship" );
				break;
			default:
				$(location).attr('hash', "" );
				loadTemplate( "home_index" );
				break;
		}
	}

	function loadTemplate(key)
	{
		console.log("debug:loadTemplate():key:", key);
		var template = "./temp/"+key+".html";
		console.log("debug:loadTemplate():template:", template);

		//var hash = $(location).attr('hash').split("#").join("");


		$("#content-body").fadeOut("fast", function(e){
			console.log("fadeout():");
			$("#content-body").empty();
			$("#content-body").load( template , function(responseText, textStatus, XMLHttpRequest)
			{
            	$("#content-body").fadeIn("fast", function(e){
            		console.log("fadeIn()");
            	});
        	});
		});
	}


</script>

<script src="./iidx/components/respond/respond.src.js"></script>

</body>
</html>



