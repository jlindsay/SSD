
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Sea Stream Demo: Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- For third-generation iPad with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="./iidx/components/brandkit/favicon/favicon-144px.png">

  <!-- For iPhone with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="./iidx/components/brandkit/favicon/favicon-114px.png">

  <!-- For first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="./iidx/components/brandkit/favicon/favicon-72px.png">

  <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="./iidx/components/brandkit/favicon/favicon.png">

  <link rel="icon" href="./iidx/components/brandkit/favicon/favicon.ico">
  <link href="./iidx/css/iids.css" rel="stylesheet" type="text/css">
  <link href="./iidx/css/responsive.css" rel="stylesheet" type="text/css">



  <link href="./css/hmi.css" rel="stylesheet" type="text/css">
  <!--link href="./css/styles.css" rel="stylesheet" type="text/css"-->

  <!--link href="./css/main.css" rel="stylesheet" type="text/css"-->

  <!--[if lt IE 9]>
    <link id="theme-ie" href="../../css/ie.css" rel="stylesheet" type="text/css">
  <![endif]-->

  <script src="./iidx/components/modernizr/modernizr.js"></script>

<style>
</style>

</head>
<body>

<nav id="navbar" class="navbar navbar-static-top navbar-default" role="navigation" style="display:none;">

  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <a class="navbar-brand" href="./index.html"><span class="ge-logo"></span> <span>Sea Stream Demo<small><i>powered by</i> GE Software</small></span></a>

      <!-- .navbar-toggle for collapsed navbar content -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

  <div class="pull-right">
      <div class="btn-toolbar pull-left">
       
        
        <div class="btn-group open">
          <button class="btn btn-inverse dropdown-toggle" data-toggle="dropdown"><i class="icon-user"></i><span class="user-name">Tom Edison</span> <i class="icon-chevron-down"></i></button>
          <!--ul class="dropdown-menu pull-right">
            <li><a href="#">Action</a></li>
            <li><a href="#">Another action</a></li>
            <li><a href="#">Something else here</a></li>
            <li class="divider"></li>
            <li><a href="#">Separated link</a></li>
          </ul-->
        </div>
        <!--div class="circular">asdf</div-->
        <img class="circular" src="./img/people/jeff-crossman.jpg" />
      </div>
    </div>
  </div>


  <div class="primary-navbar nav-collapse">
    <div class="container">
    
      <ul id="master-nav" class="nav navbar-nav">
        <li><a href="#fleet">
        	<svg height="10" width="10">
  				<circle cx="5" cy="5" r="5" stroke="black" stroke-width="0" fill="#3c95f5" />
			</svg>
			<span style="margin-left:5px;">Fleet</span></a>
		</li>
        <li><a href="#ship">
        	<svg width="10" height="10"><path d=" M 5 0 L 0 10 L 10 10" fill="#ff0000" /></svg>
        	<span style="margin-left:5px;">Ship</span></a>
        </li>
      </ul>


      <ul id="fleet" class="nav navbar-nav" style="margin-left:40px;display:none;">
        <li><a class="active" href="#">
        	<svg height="10" width="10">
  				<circle cx="5" cy="5" r="5" stroke="black" stroke-width="0" fill="#3c95f5" />
			</svg>
			<span style="margin-left:5px;">A</span></a>
		</li>
        <li><a href="#">
        	<svg height="10" width="10">
  				<circle cx="5" cy="5" r="5" stroke="black" stroke-width="0" fill="#3c95f5" />
			</svg>
			<span style="margin-left:5px;">B</span></a>
		</li>
        <li><a href="#">        	
        	<svg height="10" width="10">
  				<circle cx="5" cy="5" r="5" stroke="black" stroke-width="0" fill="#3c95f5" />
			</svg>
			<span style="margin-left:5px;">C</span></a>
		</li>
      </ul>

      <ul id="ship" class="nav navbar-nav" style="margin-left:40px;display:none;">
        <li><a class="active" href="#">
            <svg height="10" width="10">
  				<circle cx="5" cy="5" r="5" stroke="black" stroke-width="0" fill="#3c95f5" />
			</svg>
			<span style="margin-left:5px;">BOP</span></a>
		</li>
        <li><a href="#">
             <svg height="10" width="10">
  				<circle cx="5" cy="5" r="5" stroke="black" stroke-width="0" fill="#3c95f5" />
			</svg>
			<span style="margin-left:5px;">Well</span></a>
        </li>
        <li><a href="#">        	
        	<svg height="10" width="10">
  				<circle cx="5" cy="5" r="5" stroke="black" stroke-width="0" fill="#3c95f5" />
			</svg>
			<span style="margin-left:5px;">Riser</span></a>
        </li>
        <li><a href="#">
        	<svg width="10" height="10"><path d=" 	M 5 0 
										        	L 0 10 
										        	L 10 10
										        	" fill="#ff9821" /></svg>
			<span style="margin-left:5px;">Drillfloor</span></a>
        </li>
        <li><a href="#">        	
        	<svg height="10" width="10">
  				<circle cx="5" cy="5" r="5" stroke="black" stroke-width="0" fill="#3c95f5" />
			</svg>
			<span style="margin-left:5px;">Fire & Gas</span></a>
        </li>
        <li><a href="#">        	
        	<svg height="10" width="10">
  				<circle cx="5" cy="5" r="5" stroke="black" stroke-width="0" fill="#3c95f5" />
			</svg>
			<span style="margin-left:5px;">Power Managment</span></a>
        </li>
        <li><a href="#">        	
        	<svg height="10" width="10">
  				<circle cx="5" cy="5" r="5" stroke="black" stroke-width="0" fill="#3c95f5" />
			</svg>
			<span style="margin-left:5px;">Dynamic Positioning</span></a>
        </li>
      </ul>

  </div>

</nav>

<ul id="breadcrumb" class="breadcrumb">
    <li><a href="#">Vessel name</a></li>
    <li><a href="#">Ballast & Bilge</a></li>
    <li class="active">Ballast System #2</li>
</ul>

<section id="content-body">
<!-- content is loaded here... -->
</section>



<script src="./iidx/components/requirejs/require.js"></script>
<script src="./iidx/js/require.config.js"></script>
<script type="text/javascript">

	require.config({
    	baseUrl: './iidx/'
  	});

</script>


<script src="./iidx/components/jquery/jquery.js"></script>
<!--script src="./js/jquery.cookie.js"></script>
<script src="./js/jquery.url.js"></script-->
<script src="./js/globle.js"></script>
<script src="./js/keynote.js"></script>
<!--script src="./js/jquery.scrollTo.js"></script-->
<script>

	
	require.config({
		baseUrl: './',
		urlArgs: String("r="+ (new Date()).getTime()),
  		paths: {
			'cookies': 'js/jquery.cookie',
    		'url': 'js/jquery.url',
    		'keynote': 'js/keynote',
    		'scrollTo':'js/jquery.scrollTo.js'
		},
		shim: {
			'url': ['jquery'],
			'cookies': ['jquery'],
			'scrollTo' : ['jquery']
		}

	});

	require(['jquery','cookies', 'url', 'keynote'], function($) {
   			console.log("deubg:init()");
   		var _keynote = new Keynote().init( { pages: _pages } );
   			initUI();
	});


	var DEFAULT_TEMPLATE = "./temp/overview.html";
	var _tab;
	var _sub_nav;
	var _sub_nav_dropdown;

	function initUI()
	{
		console.log("debug:initUI()");
		
		$("#master-nav li").click(function(e){
				e.preventDefault();
			var elm = $(e.target).attr("href");
				$("#master-nav li").removeClass("active");
				$(e.target).closest("li").addClass("active");
				focusMainTabs(elm);
		});
		
		parseURL();
		

	}

	function parseURL()
	{
		console.log("debug:parseURL()");
		//var url = $(location).attr('href');
		var hash = $(location).attr('hash').split("#").join("");
			
			hash = hash.split("&");

		var hash_params = {};

		$.each( hash , function($index,$val){
			var tmp = $val.split("=");
				hash_params[tmp[0]] = tmp[1];
		});

		_tab = hash_params['tab'];
		_sub_nav 			= hash_params['sub'];
		_sub_nav_dropdown 	= hash_params['dropdown'];
		

		switch(_tab)
		{
			case "ship":
				focusMainTabs("#ship");
				break;
			case "fleet":
				focusMainTabs("#fleet");
			 	break;
			case "index":
			default:
				focusMainTabs("#index");
				break;
		}

	}


	function focusMainTabs(elm_id)
	{
		console.log( "debug:focusMainTabs():elm_id:", elm_id );
//		_nav_id = elem_id ? elem_id : 0;
		$("#fleet").hide();
		$("#ship").hide();
		
		if( !elm_id ){
			return;
		}

		var elm = $("#master-nav").find("a[href='"+elm_id+"']");//
			$("#master-nav li").removeClass("active");
		if( elm )
		{
			$(elm).closest("li").addClass("active");	
		}else{
			//$("#master-nav li:first").addClass("active");
		}
		
		$("#navbar").fadeIn();
		$(elm_id).fadeIn();

		var key = elm_id.split("#").join("");

		switch(elm_id)
		{
			case "#fleet":
				loadTemplate( "home_fleet" );
				break;
			case "#ship":
				loadTemplate( "home_ship" );
				break;
			case "#index":
			default:
				loadTemplate( "home_index" );
				break;
		}
	}

	function updateBreadcrum()
	{
		console.log("updateBreadcrum()");

		var hash = "";
		var html = "";
		
		if( _tab ){
			hash += "tab=" + _tab;
			html += "<li>" + _tab.split("-").join(" ")+"</li>";
		}
		if( _sub_nav && _sub_nav != "" ){
			hash += "&sub=" + _sub_nav;	
			html += "<li>" + _sub_nav.split("-").join(" ")+"</li>";
		}

		if( _sub_nav_dropdown && _sub_nav_dropdown != "" ){ 
			hash += "&dropdown=" + _sub_nav_dropdown;
			html += "<li>" + _sub_nav_dropdown.split("-").join(" ")+"</li>";
		}

//			console.log("updateBreadcrum:hash:", hash);

			$(location).attr('hash', hash  );
			
			$("#breadcrumb").empty();
			$("#breadcrumb").html(html);
			$("#breadcrumb li:last").addClass("active");
	}

	function initSubNav()
	{
		console.log("debug:initSubNav()");
		//_sub_nav = 

		$("#secondary ul li.level-0").off();
		$("#secondary ul li.level-0").click(function(e){
				
				e.preventDefault();
				
				if( $( e.target ).hasClass("level-1") ){
					//NOTE: this is a hack, to get around the nest "ul li a"
					return;
				}
				
				
				
				var key;
				try{
					key = $( e.target ).attr('href').split("#").join("");		
				}catch(e){}
			
				if(!key){
					return;
				}
				
				$("#secondary ul li.level-0").removeClass("selected");
				$(e.target).closest( "li").addClass("selected");
				

				console.log("level-0:click:", e.target );
				focusSubNav( key );

				if( $(e.target).closest("li.level-0").find("ul") )
				{
					$(e.target).closest("li.level-0").find("ul").slideToggle();	
				}
				
		});

		if( !_sub_nav || _sub_nav == "" ){
			$("#secondary ul li.level-0:first a").trigger("click");	
		}else{
			$("#secondary ul li.level-0 a").each(function(index,elm){
				var val = $(elm).attr("href").split("#").join("");
				if( _sub_nav == val )
				{
					console.log("match:", _sub_nav, ", val:", val );
					$(elm).trigger("click");
				}
			})
		}
		


		$(".secondary-tree li.level-1").off();
		$(".secondary-tree li.level-1").click(function(e){
			e.preventDefault();
			_sub_nav_dropdown = $(e.target).closest("li").find("span").attr("data").split("#").join("") ;
			console.log("level-1:click:", _sub_nav_dropdown );
			$(".secondary-tree li").removeClass("selected");
			$(e.target).closest("li").addClass("selected");

			loadSubNavDropdownContentTemplate(_sub_nav_dropdown);
			updateBreadcrum();
			
		});
		if( !_sub_nav_dropdown || _sub_nav_dropdown == "" ){
			//$("#secondary-tree ul li:first a").trigger("click");
		}
		
	}


	function focusSubNav(key)
	{
		console.log( "debug:focusSubNav():key:", key );				
		loadSubNavContentTemplate(key);
		$('.secondary-tree').hide();
		$('.secondary-tree li').removeClass("selected");
		//$('.secondary-tree').slideToggle();	

		_sub_nav = key;
		_sub_nav_dropdown = undefined;
		updateBreadcrum();


	}

	function loadSubNavDropdownContentTemplate(key)
	{
			console.log( "debug:loadSubNavDropdownContentTemplate():key:", key );
		var template = "./temp/sub_dropdown/"+key+".html";
	
			$("#content-pannels").fadeOut("fast", function(e){
				//console.log("debug:loadSubNavDropdownContentTemplate():complete");
				$("#content-pannels").empty();
				$("#content-pannels").load( template , function(responseText, textStatus, XMLHttpRequest)
				{
	            	$("#content-pannels").fadeIn("fast", function(e){
	            		//console.log("debug:content-pannels.fadeIn():complete");
	            	});
	        	});
			});

			loadSubNavTemplate(key);
	}


	function loadSubNavContentTemplate(key)
	{
			console.log( "debug:loadSubNavContentTemplate():key:", key );
			
		var template = "./temp/sub/"+key+".html";
//			console.log( "debug:loadSubNavContentTemplate():template:", template );
			//$("#content-pannels")
			//$("#asset-pannels")
			$("#content-pannels").fadeOut("fast", function(e){
//				console.log("debug:loadSubNavContentTemplatefadeout():complete");
				$("#content-pannels").empty();
				$("#content-pannels").load( template , function(responseText, textStatus, XMLHttpRequest)
				{
	            	$("#content-pannels").fadeIn("fast", function(e){
//	            		console.log("debug:content-pannels.fadeIn():complete");
	            	});
	        	});
			});

			loadSubNavTemplate(key);
	}

	function loadSubNavTemplate(key)
	{
			console.log( "debug:loadSubNavTemplate():key:", key );
		var template = "./temp/nav/"+key+".html";
			console.log( "debug:loadTemplate():template:", template );

			$("#asset-pannels").fadeOut("fast", function(e){
				console.log("debug:asset-pannels:fadeout():complete");
				$("#asset-pannels").empty();
				$("#asset-pannels").load( template , function(responseText, textStatus, XMLHttpRequest)
				{
	            	$("#asset-pannels").fadeIn("fast", function(e){
	            		console.log("fadeIn()");
	            	});
	            	
		            
		            $(".asset-pannel").removeClass("selected");
		            $(".asset-pannel:first").addClass("selected");
		            //$(".asset-pannel").unbind("click");
		            $(".asset-pannel").click(function(e){
		            	e.preventDefault();
		            	console.log( $(e.target).attr('href') );

		            	$("html, body").animate({ scrollTop: $( $(e.target).attr('href') ).offset().top }, 500);

		            	$(".asset-pannel").removeClass("selected");
		            	$(e.target).closest(".asset-pannel").addClass("selected");

		            	//$("#asset-pannels").animate({ scrollTop: $( $(e.target).attr('href') ).offset().top }, 500);

		            	
						
	            	});
	            	
	            	//$("#asset-pannels .asset-pannel ul li:first a").trigger("click");
	            	

	        	});
			});
	}
	
	function loadTemplate(key)
	{
			console.log("debug:loadTemplate():key:", key);
		var template = ( key )? "./temp/"+key+".html" : DEFAULT_TEMPLATE ;
			console.log("debug:loadTemplate():template:", template);

		//var hash = $(location).attr('hash').split("#").join("");


		$("#content-body").fadeOut("fast", function(e){
			console.log("fadeout()::complete");
			$("#content-body").empty();
			$("#content-body").load( template , function(responseText, textStatus, XMLHttpRequest)
			{
            	$("#content-body").fadeIn("fast", function(e){
            		console.log("fadeIn()");
            	});

            	initSubNav();
        	});
		});

	}

	

</script>

<script src="./iidx/components/respond/respond.src.js"></script>

</body>
</html>



